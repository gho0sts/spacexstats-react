(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{207:function(e,o,t){var n=t(59);n="function"==typeof n?n:window.Hammer;var a=t(17),i=(a="function"==typeof a?a:window.Chart).helpers,l=a.Zoom=a.Zoom||{},r=l.zoomFunctions=l.zoomFunctions||{},m=l.panFunctions=l.panFunctions||{},s=l.defaults={pan:{enabled:!0,mode:"xy",speed:20,threshold:10},zoom:{enabled:!0,mode:"xy",sensitivity:3}};function u(e,o){return void 0===e||"string"==typeof e&&-1!==e.indexOf(o)}function c(e,o){if(e.scaleAxes&&e.rangeMax&&!i.isNullOrUndef(e.rangeMax[e.scaleAxes])){var t=e.rangeMax[e.scaleAxes];o>t&&(o=t)}return o}function d(e,o){if(e.scaleAxes&&e.rangeMin&&!i.isNullOrUndef(e.rangeMin[e.scaleAxes])){var t=e.rangeMin[e.scaleAxes];o<t&&(o=t)}return o}function p(e,o,t,n){var a=e.max-e.min,i=a*(o-1),l=e.isHorizontal()?t.x:t.y,r=(e.getValueForPixel(l)-e.min)/a,m=i*r,s=i*(1-r);e.options.ticks.min=d(n,e.min+m),e.options.ticks.max=c(n,e.max-s)}function f(e,o,t,n){var a=r[e.options.type];a&&a(e,o,t,n)}function v(e,o,t,n){var a=e.chartArea;t||(t={x:(a.left+a.right)/2,y:(a.top+a.bottom)/2});var l=e.options.zoom;if(l&&i.getValueOrDefault(l.enabled,s.zoom.enabled)){var r,m=i.getValueOrDefault(e.options.zoom.mode,s.zoom.mode);l.sensitivity=i.getValueOrDefault(e.options.zoom.sensitivity,s.zoom.sensitivity),r="xy"==m&&void 0!==n?n:"xy",i.each(e.scales,function(e,n){e.isHorizontal()&&u(m,"x")&&u(r,"x")?(l.scaleAxes="x",f(e,o,t,l)):!e.isHorizontal()&&u(m,"y")&&u(r,"y")&&(l.scaleAxes="y",f(e,o,t,l))}),e.update(0),"function"==typeof l.onZoom&&l.onZoom()}}function x(e,o,t){var n=e.options.ticks,a=e.start,i=e.end;n.reverse?(n.max=e.getValueForPixel(e.getPixelForValue(a)-o),n.min=e.getValueForPixel(e.getPixelForValue(i)-o)):(n.min=e.getValueForPixel(e.getPixelForValue(a)-o),n.max=e.getValueForPixel(e.getPixelForValue(i)-o)),n.min=d(t,n.min),n.max=c(t,n.max)}function g(e,o,t){var n=m[e.options.type];n&&n(e,o,t)}function h(e){var o=e.scales;for(var t in o){var n=o[t];if(!n.isHorizontal())return n}}l.zoomFunctions.category=function(e,o,t,n){var a=e.chart.data.labels,i=e.minIndex,r=a.length-1,m=e.maxIndex,s=n.sensitivity,u=e.isHorizontal()?e.left+e.width/2:e.top+e.height/2,p=e.isHorizontal()?t.x:t.y;l.zoomCumulativeDelta=o>1?l.zoomCumulativeDelta+1:l.zoomCumulativeDelta-1,Math.abs(l.zoomCumulativeDelta)>s&&(l.zoomCumulativeDelta<0?(p>=u?i<=0?m=Math.min(r,m+1):i=Math.max(0,i-1):p<u&&(m>=r?i=Math.max(0,i-1):m=Math.min(r,m+1)),l.zoomCumulativeDelta=0):l.zoomCumulativeDelta>0&&(p>=u?i=i<m?i=Math.min(m,i+1):i:p<u&&(m=m>i?m=Math.max(i,m-1):m),l.zoomCumulativeDelta=0),e.options.ticks.min=d(n,a[i]),e.options.ticks.max=c(n,a[m]))},l.zoomFunctions.time=function(e,o,t,n){var a,i,l=e.options;e.isHorizontal()?(a=e.right-e.left,i=(t.x-e.left)/a):(a=e.bottom-e.top,i=(t.y-e.top)/a);var r=a*(o-1),m=r*i,s=r*(1-i),u=e.getValueForPixel(e.getPixelForValue(e.min)+m),p=e.getValueForPixel(e.getPixelForValue(e.max)-s),f=p.diff(u),v=d(n,f)!=f,x=c(n,f)!=f;v||x||(l.time.min=u,l.time.max=p)},l.zoomFunctions.linear=p,l.zoomFunctions.logarithmic=p,l.panFunctions.category=function(e,o,t){var n,a=e.chart.data.labels,i=a.length-1,r=Math.max(e.ticks.length-(e.options.gridLines.offsetGridLines?0:1),1),m=t.speed,s=e.minIndex,u=Math.round(e.width/(r*m));l.panCumulativeDelta+=o,s=l.panCumulativeDelta>u?Math.max(0,s-1):l.panCumulativeDelta<-u?Math.min(i-r+1,s+1):s,l.panCumulativeDelta=s!==e.minIndex?0:l.panCumulativeDelta,n=Math.min(i,s+r-1),e.options.ticks.min=d(t,a[s]),e.options.ticks.max=c(t,a[n])},l.panFunctions.time=function(e,o,t){var n=e.options,a=c(t,e.getValueForPixel(e.getPixelForValue(e.max)-o)),i=d(t,e.getValueForPixel(e.getPixelForValue(e.min)-o)),l=o<0?a-e.max:i-e.min;n.time.max=e.max+l,n.time.min=e.min+l},l.panFunctions.linear=x,l.panFunctions.logarithmic=x,l.panCumulativeDelta=0,l.zoomCumulativeDelta=0;var z={id:"zoom",afterInit:function(e){i.each(e.scales,function(e){e.originalOptions=i.clone(e.options)}),e.resetZoom=function(){i.each(e.scales,function(e,o){var t=e.options.time,n=e.options.ticks;t&&(t.min=e.originalOptions.time.min,t.max=e.originalOptions.time.max),n&&(n.min=e.originalOptions.ticks.min,n.max=e.originalOptions.ticks.max)}),i.each(e.data.datasets,function(e,o){e._meta=null}),e.update()}},beforeInit:function(e){e.zoom={};var o=e.zoom.node=e.chart.ctx.canvas,t=e.options,a=i.getValueOrDefault(t.pan?t.pan.threshold:void 0,l.defaults.pan.threshold);if(t.zoom&&t.zoom.enabled&&(t.zoom.drag?(t.zoom.mode="x",e.zoom._mouseDownHandler=function(o){e.zoom._dragZoomStart=o},o.addEventListener("mousedown",e.zoom._mouseDownHandler),e.zoom._mouseMoveHandler=function(o){e.zoom._dragZoomStart&&(e.zoom._dragZoomEnd=o,e.update(0))},o.addEventListener("mousemove",e.zoom._mouseMoveHandler),e.zoom._mouseUpHandler=function(o){if(e.zoom._dragZoomStart){var t=e.chartArea,n=h(e),a=e.zoom._dragZoomStart,i=a.target.getBoundingClientRect().left,l=Math.min(a.clientX,o.clientX)-i,r=Math.max(a.clientX,o.clientX)-i-l,m=t.right-t.left,s=1+(m-r)/m;e.zoom._dragZoomStart=null,e.zoom._dragZoomEnd=null,r>0&&v(e,s,{x:r/2+l,y:(n.bottom-n.top)/2})}},o.addEventListener("mouseup",e.zoom._mouseUpHandler)):(e.zoom._wheelHandler=function(o){var t=o.target.getBoundingClientRect(),n={x:o.clientX-t.left,y:o.clientY-t.top};o.deltaY<0?v(e,1.1,n):v(e,.909,n),o.preventDefault()},o.addEventListener("wheel",e.zoom._wheelHandler)),n)){var r,m=new n.Manager(o);m.add(new n.Pinch),m.add(new n.Pan({threshold:a}));var c=function(o){var t=1/r*o.scale,n=o.target.getBoundingClientRect(),a={x:o.center.x-n.left,y:o.center.y-n.top},i=Math.abs(o.pointers[0].clientX-o.pointers[1].clientX),l=Math.abs(o.pointers[0].clientY-o.pointers[1].clientY),m=i/l;v(e,t,a,m>.3&&m<1.7?"xy":i>l?"x":"y"),r=o.scale};m.on("pinchstart",function(e){r=1}),m.on("pinch",c),m.on("pinchend",function(e){c(e),r=null,l.zoomCumulativeDelta=0});var d=null,p=null,f=!1,x=function(o){if(null!==d&&null!==p){f=!0;var t=o.deltaX-d,n=o.deltaY-p;d=o.deltaX,p=o.deltaY,function(e,o,t){var n=e.options.pan;if(n&&i.getValueOrDefault(n.enabled,s.pan.enabled)){var a=i.getValueOrDefault(e.options.pan.mode,s.pan.mode);n.speed=i.getValueOrDefault(e.options.pan.speed,s.pan.speed),i.each(e.scales,function(e,i){e.isHorizontal()&&u(a,"x")&&0!==o?(n.scaleAxes="x",g(e,o,n)):!e.isHorizontal()&&u(a,"y")&&0!==t&&(n.scaleAxes="y",g(e,t,n))}),e.update(0),"function"==typeof n.onPan&&n.onPan()}}(e,t,n)}};m.on("panstart",function(e){d=0,p=0,x(e)}),m.on("panmove",x),m.on("panend",function(e){d=null,p=null,l.panCumulativeDelta=0,setTimeout(function(){f=!1},500)}),e.zoom._ghostClickHandler=function(e){f&&(e.stopImmediatePropagation(),e.preventDefault())},o.addEventListener("click",e.zoom._ghostClickHandler),e._mc=m}},beforeDatasetsDraw:function(e){var o=e.chart.ctx,t=e.chartArea;if(o.save(),o.beginPath(),e.zoom._dragZoomEnd){var n=h(e),a=e.zoom._dragZoomStart,i=e.zoom._dragZoomEnd,l=a.target.getBoundingClientRect().left,r=Math.min(a.clientX,i.clientX)-l,m=Math.max(a.clientX,i.clientX)-l-r;o.fillStyle="rgba(225,225,225,0.3)",o.lineWidth=5,o.fillRect(r,n.top,m,n.bottom-n.top)}o.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),o.clip()},afterDatasetsDraw:function(e){e.chart.ctx.restore()},destroy:function(e){if(e.zoom){var o=e.options,t=e.zoom.node;o.zoom&&o.zoom.drag?(t.removeEventListener("mousedown",e.zoom._mouseDownHandler),t.removeEventListener("mousemove",e.zoom._mouseMoveHandler),t.removeEventListener("mouseup",e.zoom._mouseUpHandler)):t.removeEventListener("wheel",e.zoom._wheelHandler),n&&t.removeEventListener("click",e.zoom._ghostClickHandler),delete e.zoom;var a=e._mc;a&&(a.remove("pinchstart"),a.remove("pinch"),a.remove("pinchend"),a.remove("panstart"),a.remove("pan"),a.remove("panend"))}}};e.exports=z,a.pluginService.register(z)}}]);